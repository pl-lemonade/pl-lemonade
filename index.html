<html>
    <head>
        <title>Lemonade</title>
        <link rel="icon" type="image/x-icon" href="media/favicon.png">
        <link rel="stylesheet" href="main.css">
        <!-- no i dont know js, all js scripts are from other sources and certain css transitions aswell -->
        <script>
            var isChromium = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        
            if (!isChromium) {
                console.warn("YOUR BROWSER MAY NOT SUPPORT CERTAIN ELEMENTS ON THIS PAGE. Made and tested for Chromium browsers only.");
            } else {
                console.info("Elements on this page should function as designed for Chromium browsers.");
            }
        </script>  
        <script src="./marked.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app-check.js"></script>
        <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-434WT5RY5Q"></script> -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const firebaseConfig = {
    apiKey: "AIzaSyA8KZH699uYiuDc8bpZ_6VNlu8oy9wii9g",
    authDomain: "portfolio-pl.firebaseapp.com",
    projectId: "portfolio-pl",
    databaseURL: "https://portfolio-pl-default-rtdb.europe-west1.firebasedatabase.app/",
    storageBucket: "portfolio-pl.firebasestorage.app",
    messagingSenderId: "1038657748283",
    appId: "1:1038657748283:web:8788546d1fb22129570b1e",
    measurementId: "G-434WT5RY5Q"
  };

  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const analytics = firebase.analytics();

  //DebugView for analytics - gtag
  //window.dataLayer = window.dataLayer || [];
  //function gtag(){ dataLayer.push(arguments); }
  //gtag('js', new Date());
  //gtag('config', 'G-434WT5RY5Q', { debug_mode: true });

  const appCheck = firebase.appCheck();
  appCheck.activate('6Lfs4JErAAAAANtllVNICBfKeZ6Ip-wYu3LyE1H-', true);

  const saveVisitorId = (visitorId) => {
    const ref = db.ref('visitors/' + visitorId);
    ref.set({ visitedAt: new Date().toISOString() })
      .then(() => {
        analytics.logEvent('visitor_saved', {
          visitor_id: visitorId,
          visited_at: new Date().toISOString(),
        });
      })
      .catch(error => {
        //console.error('Error saving visitor ID:', error);
      });
  };

  FingerprintJS.load()
    .then(fp => fp.get())
    .then(async result => {
      const visitorId = result.visitorId;
      console.log('Visitor ID:', visitorId);

      document.getElementById('visitor-id').innerText = `Visitor ID: ${visitorId}`;

      saveVisitorId(visitorId);

      //security

      try {
        const geoRes = await fetch("https://ipapi.co/json/");
        const geo = await geoRes.json();

        const seciplog = false;
        if (seciplog) {
        const securityRef = db.ref('security/' + visitorId);
        await securityRef.set({
          ip: geo.ip,
          asn: geo.asn,
          org: geo.org,
          utc_timestamp: new Date().toISOString()
        });
      }

        // end of security
        //analytics

        const browserTz = Intl.DateTimeFormat().resolvedOptions().timeZone;
        const ipTz = geo.timezone;

        const TzMismatch = browserTz !== ipTz;

        if (!TzMismatch) {

        analytics.logEvent('visitor_geo', {
          visitor_id: visitorId,
          ip_location_city: geo.city || "unknown",
          ip_location_region: geo.region || "unknown",
          ip_location_country: geo.country_name || "unknown",
          ip_location_timezone: geo.timezone || "unknown"
        });
      }} catch (err) {
        //console.error('Security/Analytics Error:', err);
      }

      // end of analytics

      analytics.logEvent('page_view', {
        page_path: window.location.pathname,
        page_title: document.title,
      });
    })
    .catch(error => {
      //console.error('Error generating visitor ID:', error);
    });

  const visitorsRef = db.ref('visitors');
  const addon = 250; // custom offset

  visitorsRef.once('value', (snapshot) => {
    const visitorsData = snapshot.val();
    const visitorCount = Object.keys(visitorsData || {}).length;
    const totalCount = visitorCount + addon;
    document.getElementById('visitor-count').innerText = `${totalCount}`;
  });
});
</script>
<script src="https://kit.fontawesome.com/1304c38665.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    </head>
    <body>
        <div id="enter-overlay">
            <div>
              <p id="eop">welcome</p>
            </div>
        </div>
        <div id="hello-overlay">
            <div>
                <p id="hop">Hi, I'm Lemo</p>
            </div>
        </div>
        <video autoplay loop muted playsinline class="background-video">
            <source src="https://pl-lemonade.github.io/pl-lemonade/media/smokedope2016 - In Da Party - adj.mp4" type="video/mp4">
            <img src="media/img-def-bg.png" class="background-image">
            
        </video>
        <!--<div style="position: absolute; top: 0; height: 100%; width: 100%;" id="particles-js">-->
            <div class="boxes">
                <div class="box">
                    <div class="top">
                        <p class="pst">Lemonade</p>
                        <br>
                        <!--<img class="tav" src="https://pl-lemonade.github.io/pl-lemonade/media/images-_1_.png">-->
                        <div class="info">
                        <div class="section">
                            <i class="fa-solid fa-location-dot"></i>
                            <p>IE</p>
                        </div>
                        <div class="section">
                            <i class="fa-solid fa-clock"></i>
                            <p id="time">20:42 GMT</p>
                        </div>
                        <div class="section">
                            <i class="fa-solid fa-globe"></i>
                            <p><img src="media/ei-flag.gif"><img src="media/pl-flag.gif"></p>
                        </div>
                        <div class="section">
                            <i class="fa-solid fa-terminal"></i>
                            <p><i class="fa-brands fa-html5"></i> html <i class="fa-brands fa-css3-alt"></i> css</p>
                        </div>
                        </div>
                        <br>
                        <center>
                        <p class="pd">dev & cybersecurity enthusiast</p>
                        <br>
                        <p class="pd">aviation enthusiast</p>
                        <br><br>
                        <!--<p class="pd"><b style="background: linear-gradient(to top right, #fa340c, #00db11); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">go gamble or sum</b>üçÄ</p>-->
                        <div class="und"><a class="pd a" href="https://github.com/KaladinDMP/AGBrowser">Armgddn for pirated software</a></div>
                        <div class="und"><a class="pd a" href="https://github.com/JAQLIV/gunslol-open-source">Open src guns.lol / e-z.bio ...</a></div>
                        <br>
                        <!--<p class="pd" style="font-size: 15px;"><a href="https://attapoll.app/join/kljoa" style="color: #eb4e4e;">Attapoll</a> & <a href="https://cashinstyle.com/?ref=lemonade" style="color: #01a89e;">CashInStyle</a>üî•</p>-->
                        </center>
                        <div class="social">
                            <a class="link" href="https://github.com/pl-lemonade/">
                                <img src="media/github.png">
                            </a>
                            <a class="link" href="https://discord.com/users/1231252925397860354">
                                <img src="media/discord.png">
                            </a>
                            <a class="link" href="https://fly.volanta.app/profile/kebinii/">
                                <img src="media/volanta.png">
                            </a>
                        </div>
                        <p><span id="visitor-id" style="display: none;"></span></p>
                        <div><i class="fa-regular fa-eye"></i><p id="visitor-count" style="padding-left: 15px;"> ~Tracking interrupted</div>
                        <div class="appreciation">
                            <a href="https://open.spotify.com/artist/3hGJ4nHdF99Vs0gQdXz5Nw">Smokedope2016 ‚ù§</a>
                         </div>
                    </div>
                </div>
                <!--<div class="audiobox">
                    <i id="back-button" class="fa-solid fa-arrow-left"></i>
                    <i id="volume-button" class="fa-solid fa-volume-high"></i>
                    <a href="https://open.spotify.com/artist/3hGJ4nHdF99Vs0gQdXz5Nw">In Da Party - smokedope2016</a>
                </div>-->
            </div>
        <!--<script src="particles.js"></script>-->
        <script src="App.js"></script>
        <script>
  function updateTime() {
    const now = new Date();

    const formattedTime = now.toLocaleTimeString('en-IE', {
      hour: '2-digit',
      minute: '2-digit',
      hour12: false
    });

    document.getElementById('time').textContent = formattedTime;
  }

  updateTime();
  setInterval(updateTime, 1000);
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const overlay = document.getElementById('enter-overlay');
  const helloOverlay = document.getElementById('hello-overlay');
  const eop = document.getElementById('eop');
  const hop = document.getElementById('hop');
  const video = document.querySelector('.background-video');
  const audio = new Audio('media/smokedope2016 - In Da Party - adj.mp4');
  audio.loop = true;
  audio.volume = 1;

  const waitForCanPlayThrough = media =>
    new Promise(res =>
      media.readyState >= 4
        ? res()
        : media.addEventListener('canplaythrough', res, {once: true})
    );

  Promise.all([waitForCanPlayThrough(video), waitForCanPlayThrough(audio)])
    .then(() => {
      overlay.addEventListener('click', function handleClick () {
        video.currentTime = 0;
        Promise.all([video.play(), audio.play()]).catch(console.error);
        overlay.classList.add('fade-out');
        eop.classList.add('fade-out');
        helloOverlay.classList.add('show');
        setTimeout(() => hop.classList.add('fade-in'), 600);
        setTimeout(() => {
          helloOverlay.classList.add('slide-down');
          document.querySelector('.box').classList.add('show-box');
          hop.classList.add('fade-out');
        }, 2800);
        overlay.removeEventListener('click', handleClick);
      });
    });
});
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const box = document.querySelector('.box');

  box.addEventListener('mousemove', (e) => {
    const rect = box.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    const centerX = rect.width / 2;
    const centerY = rect.height / 2;

    const rotateX = ((y - centerY) / centerY) * -8;
    const rotateY = ((x - centerX) / centerX) * 8;

    box.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1, 1, 1)`;
  });

  box.addEventListener('mouseleave', () => {
    box.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)';
  });
});
</script>
<script src="https://unpkg.com/cursor-effects@latest/dist/browser.js"></script>
<script type="module">
  import { fairyDustCursor } from "https://unpkg.com/cursor-effects@latest/dist/esm.js";

  new fairyDustCursor({
  //colors: ["#fff", "#000", "#E75A0A", "#FFFF00", "#808080"]
  colors: ["#fff", "#000"]
});
</script>
    </body>
</html>